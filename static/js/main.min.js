/**
 * Copyright (c) edisonlee55
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
 document.getElementById("generate").addEventListener("click",()=>{let a=document.getElementById("input").files[0];if(!a)return void Swal.fire({icon:"error",title:"\u8ACB\u9078\u64C7\u8981\u8F49\u63DB\u7684 ASS \u6A94\u6848"});let b=new FormData;b.append("file",a),fetch("/upload",{method:"POST",body:b}).then(a=>{if(a.ok){let b=a.headers.get("Content-Disposition").split("filename=")[1];return"\""===b.charAt(0)&&"\""===b.charAt(b.length-1)&&(b=b.substr(1,b.length-2)),{blob:a.blob(),fileName:b}}throw new Error(a.statusText)}).then(b=>{b.blob.then(c=>{let d=URL.createObjectURL(c),e=document.createElement("a");e.href=d,e.download=b.fileName,e.click()})}).catch(a=>{Swal.fire({icon:"error",title:"\u6A94\u6848\u7522\u751F\u767C\u751F\u932F\u8AA4",text:"\u8ACB\u7A0D\u5F8C\u518D\u8A66\u3002",footer:`${a}`})})});
