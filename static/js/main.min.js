/**
 * Copyright (c) edisonlee55
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
document.getElementById("generate").addEventListener("click",()=>{let a=document.getElementById("input").files[0];if(!a)return void Swal.fire({icon:"error",title:"Please select the ASS file to be converted"});let b=new FormData;b.append("file",a),fetch("/upload",{method:"POST",body:b}).then(a=>{if(a.ok){let b=a.headers.get("Content-Disposition").split("filename=")[1];return"\""===b.charAt(0)&&"\""===b.charAt(b.length-1)&&(b=b.substr(1,b.length-2)),{blob:a.blob(),fileName:b}}throw new Error(a.statusText)}).then(b=>{b.blob.then(c=>{let d=URL.createObjectURL(c),e=document.createElement("a");e.href=d,e.download=b.fileName,e.click()})}).catch(a=>{Swal.fire({icon:"error",title:"Something went wrong",text:"Please try again.",footer:`${a}`})})});
